
<template name="questionbox">
  <form class="questions-newQuestion">
    <input type="text" name="qText" placeholder="Post new question">
    <input type="submit" class="questions-submit" value="submit">
    <button class="questions-con-button">I'm {{not}} Confused {{time}}</button>
  </form>
</template>

<template name="questionsort">
  <button id="questions-sortbytime" class="{{selectedtimesorter}}">Newest</button>
  <button id="questions-sortbyvotes" class="{{selectedvotesorter}}">Highest Votes</button>
</template>

<template name="questionlist">

  <script language="JavaScript">
    window.onbeforeunload = leave;
    function leave(){
      var lecture =  Lectures.findOne(Router.current().params.lecture_id);
      if (lecture.totalList.indexOf(Meteor.userId()) == 1) {
        Lectures.update(Router.current().params.lecture_id, 
        {
          $pull: {totalList: Meteor.userId()}
        });
      }
    }
  </script>

  <div class="questions-sorter">
    {{> questionsort}}
  </div>
  <div class="questions-listContainer" onmouseover="this.style.overflow='auto'" onmouseout="this.style.overflow='hidden'">
    <ul class="questions-list">
      {{#if sortkeytime}}
        {{#each questionsTop}}
          {{> question}}
        {{/each}}
      {{else}}
        {{#each questionsNew}}
          {{> question}}
        {{/each}}
      {{/if}}
    </ul>
  </div>
</template>

<template name="question">
  <li class="questions-listItem">
    <div class="question-score">
      {{value}}
    </div>
    <div class="questions-infoContainer">
      <p class="questions-text">{{qText}}</p>
    </div>

    <div class="questions-options">
      {{#if upvoted}}
      <button class="questions-unvote">Unvote</button>
      {{else}}
      <button class="questions-upvote">Upvote</button>
      {{/if}}
      <button class="questions-delete">Delete</button>
      <button class="questions-markasimportant">Mark as Important</button>
      <span class="questions-date">{{createdAtToString}}</span>
    </div>
  </li>
</template>

<template name="questionConCounter">

  <button class="questions-conReset-button">Reset Confusion Counter</button>
  <div class="questions-barContainer">
    <div class="questions-vertical progress">
      <div class="progress-bar {{color}}" role="progressbar" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100" style="width: {{percent}}%;"></div>
    </div>
  </div>
</template>